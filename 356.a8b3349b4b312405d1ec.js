"use strict";(self.webpackChunkcountries_comparison=self.webpackChunkcountries_comparison||[]).push([[356],{3356:(W,v,i)=>{i.r(v),i.d(v,{CountryModule:()=>R});var u=i(8583),c=i(3423),D=i(27),t=i(7716);let S=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-country-detail"]],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"country-detail works!"),t.qZA())},styles:[""],changeDetection:0}),e})();var Z=i(5321),d=i(8049),m=i(5034),g=i(1095),b=i(1215),x=i(7154),T=i(6709);function A(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&e){const n=a.$implicit,o=t.oxw();t.xp6(1),t.AsE(" ",n," : ",t.lcZ(2,2,o.countryData[n])," ")}}let F=(()=>{class e{constructor(n,o,s){this.route=n,this.httpCountryService=o,this.countryStore=s,this.data=[{value:10,name:"magyar"},{value:5,name:"bosnian"},{value:5,name:"croats"},{value:80,name:"serb"}],this.columns=["name","value"],this.title={title:"<country>",subtext:"% population"},this.geoJsonUrl="assets/geo-json/countries.geojson",this.mapType=Z.z.countryMap,this.handleTitle=r=>{this.title.title=r.state},this.handleData=r=>{r&&(this.countryData=r[0],this.countryDataKey=Object.keys(this.countryData))}}ngOnInit(){this.initPathParam(),this.initCountryData()}initPathParam(){this.route.params.pipe((0,d.P)()).subscribe(this.handleTitle)}initCountryData(){this.countryStore.allCountriesData.value?this.countryStore.getCountryByName(this.title.title).subscribe(this.handleData):this.httpCountryService.getCountryDataByName(this.title.title).pipe((0,d.P)()).subscribe(this.handleData)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.gz),t.Y36(m.wm),t.Y36(m.vQ))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-single-country-details"]],decls:12,vars:10,consts:[["routerLink","..","mat-raised-button","","color","primary"],["routerLink","more-details","mat-raised-button","","color","primary"],[3,"geoJsonUrl","mapName","mapType"],[3,"data","title"],[3,"columns","data","pageSize"],[1,"container"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0),t._uU(1,"Back"),t.qZA(),t.TgZ(2,"button",1),t._uU(3,"more details"),t.qZA(),t._UZ(4,"router-outlet"),t.TgZ(5,"h1"),t._uU(6),t.qZA(),t._UZ(7,"app-echart-geo-map",2),t._UZ(8,"app-basic-echarts",3),t._UZ(9,"app-table",4),t.TgZ(10,"div",5),t.YNc(11,A,3,4,"div",6),t.qZA()),2&n&&(t.xp6(6),t.hij("",o.title.title," details"),t.xp6(1),t.Q6J("geoJsonUrl",o.geoJsonUrl)("mapName",o.title.title)("mapType",o.mapType),t.xp6(1),t.Q6J("data",o.data)("title",o.title),t.xp6(1),t.Q6J("columns",o.columns)("data",o.data)("pageSize",2),t.xp6(2),t.Q6J("ngForOf",o.countryDataKey))},directives:[g.lW,c.rH,c.lC,b.o,x.r,T.a,u.sg],pipes:[u.Ts],styles:[""],changeDetection:0}),e})();var h=(()=>{return(e=h||(h={})).europe="Europe",e.africa="Africa",e.oceania="Oceania",e.northAmerica="North America",e.southAmerica="South America",e.asia="Asia",h;var e})(),M=i(4402),U=i(5257),O=i(8002),p=i(171),l=i(3679),J=i(6215),N=i(9765),I=i(6782),P=i(4395),y=i(8295),j=i(6627),L=i(9983),f=i(4929);function Q(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClearSearch()}),t.TgZ(1,"mat-icon",10),t._uU(2,"clear"),t.qZA(),t.qZA()}}function $(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"mat-grid-tile"),t.TgZ(1,"div",13),t.NdJ("click",function(){const r=t.CHM(n).$implicit;return t.oxw(2).onNavigateToCountry(r.name.common)}),t.TgZ(2,"span",14),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.qZA()}if(2&e){const n=a.$implicit;t.xp6(3),t.Oqu(n.name.common),t.xp6(1),t.hij(" ",n.flag," ")}}function Y(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"mat-grid-list",11),t.YNc(2,$,5,2,"mat-grid-tile",12),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(2),t.Q6J("ngForOf",n)}}let B=(()=>{class e{constructor(n,o,s){this.router=n,this.route=o,this.countryModuleStoreService=s,this.countriesData$=new J.X([]),this.unsubscribe$=new N.xQ,this.handleContinentData=r=>{this.addContinentToStore(r),this.localDataStorForFilter=r,this.countriesData$.next(r)},this.handleContinentFromStore=r=>{let C=r[this.selectedContinentIndex];this.localDataStorForFilter=C,this.countriesData$.next(C)},this.filterCountry=r=>{r=r.toLocaleLowerCase().trim();const K=this.localDataStorForFilter.filter(V=>V.name.common.toLocaleLowerCase().trim().includes(r));this.countriesData$.next(K)}}ngOnInit(){this.countryModuleStoreService.continentsData.value.length===Object.entries(h).length?this.countryModuleStoreService.continentsData.subscribe(this.handleContinentFromStore):this.continentData[Object.keys(this.continentData)[0]].subscribe(this.handleContinentData),this.initQuerySearchForm()}ngOnDestroy(){this.unsubscribe()}onNavigateToCountry(n){this.router.navigate([n],{relativeTo:this.route})}onClearSearch(){var n;null===(n=this.querySearchForm.get("query"))||void 0===n||n.setValue("")}initQuerySearchForm(){var n;this.querySearchForm=new l.cw({query:new l.NI("")}),null===(n=this.querySearchForm.get("query"))||void 0===n||n.valueChanges.pipe((0,I.R)(this.unsubscribe$),(0,P.b)(250)).subscribe(this.filterCountry)}addContinentToStore(n){this.countryModuleStoreService.continentsData.value[this.selectedContinentIndex]=n,this.countryModuleStoreService.continentsData.next(this.countryModuleStoreService.continentsData.value)}unsubscribe(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.F0),t.Y36(c.gz),t.Y36(m.vQ))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-countries-dashboard"]],inputs:{selectedContinentIndex:"selectedContinentIndex",continentData:"continentData"},decls:12,vars:5,consts:[[1,"container"],["fxLayout","row","fxLayoutAlign"," center",1,"filter-and-sort-container"],[1,"table-filter"],[3,"formGroup"],["matPrefix","","fontSet","fal","fontIcon","fa-search"],["formControlName","query","matInput","","type","text","autocomplete","off"],["querySearch",""],["class","d-inline","mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","",1,"d-inline",3,"click"],["aria-hidden","false"],["cols","4","rowHeight","2:1"],[4,"ngFor","ngForOf"],[1,"country-item",3,"click"],[1,"country-title"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5,"Find country"),t.qZA(),t._UZ(6,"mat-icon",4),t._UZ(7,"input",5,6),t.YNc(9,Q,3,0,"button",7),t.qZA(),t.qZA(),t.YNc(10,Y,3,1,"div",8),t.ALo(11,"async"),t.qZA(),t.qZA()),2&n){const s=t.MAs(8);t.xp6(3),t.Q6J("formGroup",o.querySearchForm),t.xp6(6),t.Q6J("ngIf",s.value),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,3,o.countriesData$))}},directives:[y.KE,l.JL,l.sg,y.hX,j.Hw,y.qo,l.Fj,L.Nt,l.JJ,l.u,u.O5,g.lW,y.R9,f.Il,u.sg,f.DX],pipes:[u.Ov],styles:[".container[_ngcontent-%COMP%]{height:500px;overflow-y:auto}.dashboard-img[_ngcontent-%COMP%]{height:50px}.country-item[_ngcontent-%COMP%]{cursor:pointer}.country-title[_ngcontent-%COMP%]{margin-right:4px}"],changeDetection:0}),e})();function q(e,a){if(1&e&&(t.TgZ(0,"mat-expansion-panel"),t.TgZ(1,"mat-expansion-panel-header"),t.TgZ(2,"mat-panel-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-panel-description"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"app-countries-dashboard",2),t.qZA()),2&e){const n=a.$implicit,o=a.index,s=t.oxw();t.xp6(3),t.hij(" ",n," Countries "),t.xp6(2),t.hij(" Expand ",n," countries list "),t.xp6(1),t.Q6J("selectedContinentIndex",o)("continentData",s.continentData[o])}}const E=[{path:D._.empty,component:(()=>{class e{constructor(n,o){this.httpContinentService=n,this.countryModuleStoreService=o,this.countries=[],this.continentData=[],this.handleCountriesData=s=>{s.forEach(r=>{this.countries.push(r.name.common)}),this.countryModuleStoreService.allcountriesName=this.countries,this.countryModuleStoreService.allCountriesData.next(s)},this.handleContinent=s=>{this.continentData=s},this.handleContinentData=s=>{this.continentData.push(s)}}ngOnInit(){this.continents=this.initContinentsEnumValue(),this.countryModuleStoreService.allCountriesData.value||this.getAllCountriesData(),Object.keys(this.countryModuleStoreService.continentsData.value).length?this.countryModuleStoreService.continentsData.pipe((0,d.P)()).subscribe(this.handleContinent):this.getCountriesByContinentName()}initContinentsEnumValue(){return Object.entries(h).filter(n=>!parseInt(n[0])).map(n=>n[1].toLocaleLowerCase())}getCountriesByContinentName(){(0,M.D)(this.continents).pipe((0,U.q)(this.continents.length),(0,O.U)(n=>({[n]:this.httpContinentService.getCountriesByContinentName(n)}))).subscribe(this.handleContinentData)}getAllCountriesData(){this.httpContinentService.getCountriesData().pipe((0,d.P)()).subscribe(this.handleCountriesData)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.wm),t.Y36(m.vQ))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-country-page"]],decls:7,vars:1,consts:[["routerLink","..","mat-raised-button","","color","primary"],[4,"ngFor","ngForOf"],[3,"selectedContinentIndex","continentData"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0),t._uU(1,"Back"),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"h3"),t._uU(4,"Search Country Details by Continent"),t.qZA(),t.TgZ(5,"mat-accordion"),t.YNc(6,q,7,4,"mat-expansion-panel",1),t.qZA()),2&n&&(t.xp6(6),t.Q6J("ngForOf",o.continents))},directives:[g.lW,c.rH,p.pp,u.sg,p.ib,p.yz,p.yK,p.u4,B],styles:[""],changeDetection:0}),e})()},{path:":state",data:{breadcrumb:"Country"},component:F,children:[{path:"more-details",data:{breadcrumb:"More Details"},component:S}]}];let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(E)],c.Bz]}),e})();var H=i(8493);let R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,X,H.m]]}),e})()}}]);